pipeline {
	agent any
	tools {nodejs "my_node"}
    stages {
		stage('Git') {
			steps {
				git 'https://github.com/RemyMach/Mindory'
			}
		}
			
		stage('Build') {
			steps {
				sh 'npm install'
			}
		} 

		stage('SCM') {
			steps {
				sh 'checkout scm'
			}
		}

        stage('SonarQube analysis') {
			steps {
				script {
				// requires SonarQube Scanner 2.8+
				scannerHome = tool 'SonarScanner'
				}
				withSonarQubeEnv('SonarScanner') {
				sh "${scannerHome}/bin/sonar-scanner"
				}
			}
    	}
	}
}